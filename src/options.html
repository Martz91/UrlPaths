<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>URL Paths Settings</title>
  <link rel="stylesheet" href="options.css">
</head>

<body>
  <header class="app-header">
    <h1 class="app-header__title">UrlPaths Rules Manager</h1>
  <div class="app-header__actions">
    <button type="button" id="exportRules" class="btn-secondary btn-small">Export</button>
    <button type="button" id="importRules" class="btn-secondary btn-small">Import</button>
    <span class="app-header__version">v1.0.0</span>
  </div>
  </header>

  <main class="app-layout">
    <aside class="rules-panel">
      <div class="rules-panel__header">
        <h2>Rules</h2>
        <button id="addNewRule" type="button" class="btn-primary">Add New</button>
      </div>
      <div id="rulesList" class="rules-list"></div>
    </aside>

    <section class="details-panel">
      <div id="ruleDetails" class="rule-details">
        <div class="rule-details__empty">
          <p>Select a rule from the list to view details, or create a new rule.</p>
        </div>
      </div>
    </section>
  </main>

  <footer class="test-section">
    <h3>Test Rule</h3>
    <div class="test-form">
      <div class="test-form__input-row">
        <label for="testInput">Test URL:</label>
        <input id="testInput" type="url" placeholder="Enter a URL to test">
      </div>
      <div class="test-form__results">
        <label for="testOutput">Result:</label>
        <div id="testOutput" class="test-output">Enter a URL above to see the result</div>
      </div>
    </div>
  </footer>

  <!-- Hidden form for editing rules -->
  <form id="ruleForm" class="rule-form" style="display: none;">
    <input type="hidden" id="ruleIndex" value="">
    <div class="form-group">
      <label for="ruleName">Rule Name:</label>
      <input id="ruleName" name="ruleName" type="text" required>
    </div>
    <div class="form-group">
      <label for="pattern">Pattern:</label>
      <input id="pattern" name="pattern" type="text" required>
    </div>
    <!-- Match type removed - all rules are now regex-based -->
  </form>

  <!-- Template for transformation rows -->
  <template id="transformRowTemplate">
    <div class="transform-row">
      <div class="transform-row__content">
        <span class="transform-name" data-transform-name></span>
        <span class="transform-template" data-transform-template></span>
      </div>
      <div class="transform-row__actions">
        <button type="button" class="btn-secondary btn-small" data-edit-transform>Edit</button>
        <button type="button" class="btn-danger btn-small" data-remove-transform>Delete</button>
      </div>
    </div>
  </template>

  <!-- Import/Export (hidden file input) -->
  <input id="importFile" type="file" accept="application/json,.json" style="display: none;">

  <dialog id="importDialog" class="import-dialog">
  <div class="dialog-content">
    <h3>Import Rules</h3>
    
    <div class="form-group">
      <label for="importFileInput">Select rules file:</label>
      <input type="file" id="importFileInput" accept=".json" class="file-input">
    </div>
    
    <div class="form-group">
      <label for="importModeSelect">Import mode:</label>
      <select id="importModeSelect" class="select-input">
        <option value="merge">Merge with existing rules</option>
        <option value="replace">Replace all existing rules</option>
      </select>
    </div>
    
    <div id="importFileDetails" class="file-details" style="display: none;">
      <p>Selected file: <span id="importFileName"></span></p>
      <p>Rules found: <span id="importRuleCount">-</span></p>
    </div>
    
    <div class="dialog-actions">
      <button type="button" id="importDialogConfirm" class="btn-primary" disabled>Import</button>
      <button type="button" id="importDialogCancel" class="btn-secondary">Cancel</button>
    </div>
  </div>
</dialog>

  <script src="utils.js"></script>
  <script src="options.js"></script>
</body>

</html>